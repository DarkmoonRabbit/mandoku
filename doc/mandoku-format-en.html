<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>The <code>Mandoku</code> text format</title>
<!-- 2013-05-28 Tue 07:33 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />

<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">The <code>Mandoku</code> text format</h1>
<p>
Conventions for the text format used by <code>Mandoku</code> are made up of three parts:
</p>
<ul class="org-ul">
<li>Emacs org-mode format
</li>
<li>convention about how texts are organized into files
</li>
<li>Additional syntactical conventions singular to <code>Mandoku</code> within the files
</li>
</ul>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> The text format is based on Emacs org-mode</h2>
<div class="outline-text-2" id="text-1">
<p>
The text editor Emacs has the concept of "modes", which allows for
specialized modes of editing depending on the type of text to be
edited. This works for various programming languages and helps the
programmer to avoid mistakes by giving graphical hints through
formatting and colors and in general support the task of writing in
this language.  
</p>

<p>
Emacs org-mode (see <a href="http://orgmode.org/">Org-Mode: Your Life in Plain Text</a>[orgmode.org]) builds on
this concept, but the target is not a specific programming language
but plain text with some outlining, formatting and hyperlinking
conventions.  This makes it a lightweight text format that covers
some middle ground between absolutely complete plain text (if such a
thing exists) and complex markup languages like XML.  Since it even
supports footnotes and is easily converted to HTML, Latex and
OpenOffice format, it is useable even for research articles.
</p>

<p>
To make this possible, org-mode introduces a few special markup
constructs. Some of the assumptions of this plain text according to
org-mode are as follows:
</p>

<ul class="org-ul">
<li>Headings of all kinds are expressed by placing stars "* " in the
leftmost column of the text. The number of stars indicates the
level of the heading in the overall outline of the document. The
stars have to be followed by a space in order to be recognized as
a part of the outline. Structurally, a heading defines a
subsection.
</li>
</ul>
<pre class="example">
* Outline level one レベル１の見出し
** Outline level two レベル２の見出し
*** Outline level three レベル３の見出し
</pre>
<ul class="org-ul">
<li>following a heading a socalled "property drawer" may appear; this
is a container for additional information associated with the
subsection.
</li>
</ul>
<pre class="example">
* Introduction
 :PROPERTIES:
 :CUSTOM_ID: intro
 :END:
</pre>
<ul class="org-ul">
<li>Headings can also have "tags" attached to them, which marks them
for example for various analytical purposes, they appear on the
headline towards the right margin.
</li>
</ul>
<pre class="example">
* Outline level one レベル１の見出し          :important:
</pre>
<ul class="org-ul">
<li>Paragraphs are indicated by at least one empty line.
</li>
<li>Distinctive parts of the text, for example quotations or parts in
verse can be set apart using a specific section marker:
</li>
</ul>
<pre class="example">
即於佛前以偈頌曰。
#+BEGIN_VERSE
目淨脩廣如青蓮
心淨已度諸禪定
久積淨業稱無量
導眾以寂故稽首
#+END_VERSE
</pre>
<ul class="org-ul">
<li>Lines beginning with a pound sign '#' are treated specially, not as part of the text:
<ul class="org-ul">
<li>if followed by a "+" they introduce special keywords or syntax
used for org-mode's own purposes, for example <code>#+TITLE</code>,
<code>#+AUTHOR</code> or <code>#+DATE</code>. 
</li>
<li>the pound sign followed by a space character "# " introduces a
comment which is not considered part of the document.
</li>
</ul>
</li>
<li>Links to other files target.txt or places within the current file
are constructed like this: <code>[[target.txt][link to target.txt] ]</code>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Additional conventions for <code>Mandoku</code></h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> About texts, versions and editions</h3>
<div class="outline-text-3" id="text-2-1">
<p>
In <code>Mandoku</code> every text has a text identifier, for example
<code>T14n0475</code>, which uniquely identifies the text within a larger
collection and makes it possible to refer to it unambiguoqusly.
This identifier is usually also the name of the folder, where all
files that make up a text are stored. The text is usually split up
so that one file has the content of one scroll, and they are
numbered in sequence.  An additional file may give the table of
contents with links to the appropriate location in the files.
</p>

<pre class="example">
T14n0475_000.txt
T14n0475_001.txt
T14n0475_002.txt
T14n0475_003.txt
T14n0475.org
</pre>


<p>
The source of the text has to be given (at the beginning of the
file, this is recorded with the property keyword "WITNESS") and
there might also be a base edition (keyword "BASEEDITION"). The
base edition provides the navigation grid for all editions of a
text.
</p>

<p>
Several editions of a text might be recorded; this allows the
documentation of textual witnesses for a text and provides the
ground for critical editions of the text. Within <code>Mandoku</code>,
different editions (witnesses) of a text are stored as "branches"
in a version control system.
</p>

<p>
In order to provide a common reference system common to all
editions of a text, page numbers and locations of the line break of
the base edition are recorded in all files. Editions that have a
different layout may additionally record the page numbers according
to the source edition.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Syntactic conventions</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> Base edition and text witness</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
In <code>Mandoku</code> some import information about the source and
edition of a text can be given at the beginning of a file in machine
readable form, for example:
</p>

<pre class="example">
#+PROPERTY: BASEEDITION T
#+PROPERTY: ID T14n0475
#+PROPERTY: WITNESS 【CBETA】
#+PROPERTY: JUAN 1
</pre>

<p>
Here the base edition is identified as "T" and the witness (the
edition in this file) is given as "【CBETA】".  In addition, the
identification number of the text is recorded and the number of the
juan. 
</p>
</div>
</div>
<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2"><span class="section-number-4">2.2.2</span> Page numbers</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
The page number is given in the following form:
</p>
<pre class="example">
&lt;pb:T_T14n0475_0537a&gt;
</pre>
<p>
There are three parts to this number, separated by the "_"
character, surrounded by the page break indicator "&lt;pb: .. &gt;":
</p>
<ul class="org-ul">
<li>"T" is the identifier of the edition
</li>
<li>"T14n0475" is the identification number of the text
</li>
<li>"0537a" is the page number ("a" stands for the upper part of the
text or the first half of a page in woodblock prints that are
separated in two halves) At the moment <code>Mandoku</code> requires the page
number to end in a letter.
</li>
</ul>

<p>
The page break indicator "&lt;pb:" referes always to the witness
documented in the current file, if this differs from the base
edition, then the reference to the base edition can be given with
"&lt;md:", that is "pb" is replaced by "md".
</p>
</div>
</div>
<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3"><span class="section-number-4">2.2.3</span> Line break indicators</h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
To facilitate navigation in the text, <code>Mandoku</code> records the line
breaks of the source edition.  Together with the page numnbers,
they provide a grid of coordinates that is used to address
locations in the text.  To mark the occurrence of a line break, a
line break indicator "¶" is simply inserted at the appropriate
location in the text:
</p>
<pre class="example">
復有萬梵天王尸棄等，從餘四天下，來詣¶
佛所，而聽法；復有萬二千天帝，亦從餘四¶
天下，來在會坐；并餘大威力諸天、龍神、夜¶
叉、乾闥婆、阿脩羅、迦樓羅、緊那羅、摩睺羅¶
伽等，悉來會坐。
</pre>

<p>
This makes it possible to reformat the text in phrases without
losing the navigation grid:
</p>

<pre class="example">
復有萬梵天王尸棄等，
從餘四天下，
來詣¶佛所，
而聽法；
復有萬二千天帝，
亦從餘四¶天下，
來在會坐；
并餘大威力諸天、
龍神、
夜¶叉、
乾闥婆、
阿脩羅、
迦樓羅、
緊那羅、
摩睺羅¶伽、
等悉來會坐。
</pre>
</div>
</div>
<div id="outline-container-sec-2-2-4" class="outline-4">
<h4 id="sec-2-2-4"><span class="section-number-4">2.2.4</span> Inline notes</h4>
<div class="outline-text-4" id="text-2-2-4">
<p>
Notes that are in the original text marked as notes through
half-size characters on smaller lines are placed within
parentheses "(" and ")".
</p>
</div>
</div>
<div id="outline-container-sec-2-2-5" class="outline-4">
<h4 id="sec-2-2-5"><span class="section-number-4">2.2.5</span> Additions to the text</h4>
<div class="outline-text-4" id="text-2-2-5">
<p>
By convention, <code>Mandoku</code> considers only the characters from the
beginning of the line up to the first TAB character (U+0009) as
part of the source text. Annotations or a translation can be
placed to the right of the TAB character without influencing the
navivational grid.  Here is an example with a translation added<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>
<pre class="example">
復有萬梵天王尸棄等。　　　　　　5. There were also ten thousand Brahmā heavenly kings, Śikhin and others, 
從餘四天下來詣¶佛所而聽法。　　who descended from the other worlds of four continents to proceed to where the Buddha was in order to hear the Dharma. 
復有萬二千天帝。　　　　　　　　There were also twelve thousand heavenly emperors (i.e., Indras), 
亦從餘四¶天下來在會坐。　　　　who also came from the other worlds of four continents to sit in this assembly, 
并餘大威力諸天．　　　　　　　　and the other awesomely powerful gods (devas), 
龍神．　　　　　　　　　　　　　dragons (nāgas), 
夜¶叉．　　　　　　　　　　　　yakṣas, 
乾闥婆．　　　　　　　　　　　　gandharvas, 
阿脩羅．　　　　　　　　　　　　asuras, 
:zhu:
阿脩羅 [a1xiu1luo1] skt Asura, deities of the lowest rank.
:END:
迦樓羅．　　　　　　　　　　　　garuḍas, 
緊那羅．　　　　　　　　　　　　kiṃnaras, 
摩睺羅¶伽．　　　　　　　　　　and mahoragas, 
等悉來會坐。　　　　　　　　　who all came to sit in the assembly.
</pre>

<p>
Additionally, annotations can be placed in socalled "drawers" (of
which the property drawer above is one example) on lines by
themselves.  <code>Mandoku</code> defines a drawer called "zhu" for
annotation, informal notes etc. pertaining to certain characters
or expressions, they are understood to refer to the previous line
in the file. Drawers are introduced with the convention :&lt;name of
drawer&gt;: on a line by themselves and are ended with :END: again on
a line by themselves. In interactive use, the content of drawers
can be hidden and made to appear only when needed.
</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p>The translation is by the late John R. McRae, published in the BDK Tripitaka series, Berkeley 2004.</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Christian Wittern</p>
<p class="date">Created: 2013-05-28 Tue 07:33</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.0.2)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
